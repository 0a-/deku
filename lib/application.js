
/**
 * Module dependencies.
 */

var Emitter = require('component-emitter');

/**
 * Expose `scene`.
 */

module.exports = Application;

/**
 * Create a new `Application`.
 */

function Application() {
  if (!(this instanceof Application)) return new Application;
  this.options = {};
  this.sources = {};
  this.element = null;
}

/**
 * Mixin `Emitter`.
 */

Emitter(Application.prototype);

/**
 * Add a plugin
 *
 * @param {Function} plugin
 */

Application.prototype.use = function(plugin){
  plugin(this);
  return this;
};

/**
 * Set an option
 *
 * @param {String} name
 */

Application.prototype.option = function(name, val){
  this.options[name] = val;
  return this;
};

/**
 * Set value used somewhere in the IO network.
 */

Application.prototype.source = function(name, data){
  if (this.sources[name] === data) return;
  this.sources[name] = data;
  this.emit('source', name, data);
};

/**
 * Mount a virtual element.
 *
 * @param {VirtualElement} element
 */

Application.prototype.mount = function(element){
  this.element = element;
  this.emit('mount', element);
};

/**
 * Remove the world. Unmount everything.
 */

Application.prototype.unmount = function(){
  if (!this.element) return;
  this.element = null;
  this.emit('unmount');
};